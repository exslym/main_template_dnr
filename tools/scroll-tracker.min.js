!function(t){"use strict";function e(n){if(!(this instanceof e))return new e(n);var o=(n=n||{}).context||"body";if("string"==typeof o&&(o=a.querySelector(o)),!o)throw new Error("Unable to find context "+o);this._context=o,this.minHeight=n.minHeight||0,this._marks={},this._tracked={},this._config={percentages:{each:{},every:{}},pixels:{each:{},every:{}},elements:{each:{},every:{}}};var i=s(this._checkDepth.bind(this),500),c=this._update.bind(this),l=s(c,500);t.addEventListener("scroll",i,!0),t.addEventListener("resize",l),this._artifacts={timer:r(c),resize:l,scroll:i}}function n(t){var e,n=Math.floor(t.numerator/t.n);for(e=1;e<=n;e++)t.callback(e*t.n)}function r(t){var e=o();return setInterval((function(){o()!==e&&(t(),e=o())}),500)}function o(){var t=a.body,e=a.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}function i(e){return e.getBoundingClientRect().top-(e.scrollHeight-e.clientHeight)/2+(void 0!==t.pageYOffset?t.pageYOffset:(a.documentElement||a.body.parentNode||a.body).scrollTop)}function c(){}function s(t,e){var n,r,o,i=null,c=0,s=function(){c=new Date,i=null,o=t.apply(n,r)};return function(){var a=new Date;c||(c=a);var l=e-(a-c);return n=this,r=arguments,l<=0?(clearTimeout(i),i=null,c=a,o=t.apply(n,r)):i||(i=setTimeout(s,l)),o}}if(t.navigator.userAgent.match(/MSIE [678]/gi))return function(){var n,r={};for(n in e)r[n]=c;t.ScrollTracker=r}();var a=t.document;e.prototype.destroy=function(){clearInterval(this._artifacts._timer),t.removeEventListener("resize",this._artifacts.resize),t.removeEventListener("scroll",this._artifacts.scroll,!0)},e.prototype.on=function(t,e){var n=this._config;["percentages","pixels","elements"].forEach((function(r){t[r]&&["each","every"].forEach((function(o){t[r][o]&&t[r][o].forEach((function(t){n[r][o][t]=n[r][o][t]||[],n[r][o][t].push(e)}))}))})),this._update()},e.prototype._update=function(){this._calculateMarks(),this._checkDepth()},e.prototype._calculateMarks=function(){function t(t,e){return function(e,n){var r=e.getBoundingClientRect().top-u._context.getBoundingClientRect().top;h({label:t+"["+n+"]",depth:r,handlers:a.elements.every[t]})}}function e(t){return function(e){var n=e;h({label:String(n)+"px",depth:n,handlers:t})}}delete this._marks,this._fromTop=i(this._context),this._marks={};var r,o,c,s,a=this._config,l=this._contextHeight(),h=this._addMark.bind(this),u=this;if(!(l<this.minHeight)){for(s in a.percentages.every)n({n:Number(s),numerator:100,callback:(a.percentages.every[s],function(t){var e=Math.floor(t*l/100);h({label:String(t)+"%",depth:e,handlers:a.percentages.every[s]})})});for(s in a.pixels.every)n({n:Number(s),numerator:l,callback:e(a.pixels.every[s])});for(s in a.percentages.each)c=Math.floor(l*Number(s)/100),h({label:s+"%",depth:c,handlers:a.percentages.each[s]});for(s in a.pixels.each)c=Number(s),h({label:s+"px",depth:c,handlers:a.pixels.each[s]});for(s in a.elements.every)(r=[].slice.call(this._context.querySelectorAll(s))).length&&r.forEach(t(s,a.elements.every[s]));for(s in a.elements.each)(o=this._context.querySelector(s))&&(c=o.getBoundingClientRect().top-u._context.getBoundingClientRect().top,h({label:s,depth:c,handlers:a.elements.each[s]}))}},e.prototype._checkDepth=function(){var t,e=this._marks,n=this._currentDepth();for(t in e)n>=t&&!this._tracked[t]&&(e[t].forEach((function(t){t()})),this._tracked[t]=!0)},e.prototype.reset=function(){this._tracked={},this._marks={},this._update()},e.prototype._contextHeight=function(){return this._context!==a.body?this._context.scrollHeight-5:this._context.clientHeight-5},e.prototype._currentDepth=function(){var e,n=function(t){var e=t.offsetHeight,n=("CSS1Compat"===a.compatMode?a.documentElement:a.body).clientHeight,r=t.getBoundingClientRect();return Math.max(0,r.top>0?Math.min(e,n-r.top):r.bottom<n?r.bottom:n)}(this._context);return this._context.scrollTop?e=this._context.scrollTop+n:(this._context.scrollTop=1,this._context.scrollTop?(this._context.scrollTop=0,e=this._context.scrollTop+n):e=(t.pageYOffset||a.documentElement.scrollTop||a.body.scrollTop||0)-this._fromTop),n?e+n:e>=this._fromTop?e:-1},e.prototype._addMark=function(t){var e=t.depth;this._marks[e]=(this._marks[e]||[]).concat(function(t){return t.handlers.map((function(e){return e.bind(this,{data:{depth:t.depth,label:t.label}})}))}(t))},t.ScrollTracker=e}(this);